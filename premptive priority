#include <bits/stdc++.h>
using namespace std;

int main()
{
    int n;
    cout << "Enter number of processes: ";
    cin >> n;
    int pid[100], at[100], bt[100], pr[100];
    int rt[100], et[100], tat[100], wt[100];
    int completed = 0, time = 0;
    cout << "Enter arrival time, burst time and priority:\n";
    for (int i = 0; i < n; i++)
    {
        pid[i] = i + 1;
        cin >> at[i] >> bt[i] >> pr[i];
        rt[i] = bt[i];
    }
    int last = -1;
    while (completed < n)
    {
        int idx = -1;
        for (int i = 0; i < n; i++)
        {
            if (at[i] <= time && rt[i] > 0)
            {
                if (idx == -1 || pr[i] > pr[idx])
                    idx = i;
            }
        }
        if (idx == -1)
        {
            time++;
            continue;
        }
        rt[idx]--;
        time++;
        if (rt[idx] == 0)
        {
            et[idx] = time;
            tat[idx] = et[idx] - at[idx];
            wt[idx] = tat[idx] - bt[idx];
            completed++;
        }
    }
    float avgWT = 0;
    cout << "\nPID\tAT\tBT\tPR\tET\tTAT\tWT\n";
    for (int i = 0; i < n; i++)
    {
        cout << pid[i] << "\t"
             << at[i] << "\t"
             << bt[i] << "\t"
             << pr[i] << "\t"
             << et[i] << "\t"
             << tat[i] << "\t"
             << wt[i] << endl;
        avgWT += wt[i];
    }
    cout << "\nAverage Waiting Time = " << avgWT / n << endl;
    return 0;
}
